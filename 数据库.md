# 数据库

## 基础知识

1. 数据库管理系统（DBMS）

## sql语句

1. truncate, drop, delete区别
truncate与drop是DDL语句，执行后无法回滚；delete是DML语句，可回滚。
truncate只能作用于表；delete，drop可作用于表、视图等。
truncate会清空表中的所有行，但表结构及其约束、索引等保持不变；drop会删除表的结构及其所依赖的约束、索引等。
truncate会重置表的自增值；delete不会。
truncate不会激活与表有关的删除触发器；delete可以。
truncate后会使表和索引所占用的空间会恢复到初始大小；delete操作不会减少表或索引所占用的空间，drop语句将表所占用的空间全释放掉。

2. row_number, rank(), dense_rank()的区别

rank() 出现1、1、3这样的排序结果；
dense_rank() 1、1、2这样的排序结果；
row_number()排序相同时不会重复，会根据顺序排序。

3. ifnull(a,b)

如果不为空则a，否则b

## sql题

1. 交换座位 184
2. 行列交换
3. 选取每组最大值数据

# 大数据

## hadoop

1. mapreduce原理

map：对于每个文件块根据设立分区数对相应id求出key值，并与剩下数据组成k-v对。
mapshuffle：将数据送到缓冲区，当到达80%阈值时，将溢出数据从内存存到磁盘，并利于快排对分区内数据排序。对磁盘中所有溢出数据进行归并排序。
reduceshuffle：reduce端对map端数据根据分区边拉取边排序，一般来说分区数是reduce的相应倍数，同样是在内存中，如果超出内存，则将文件存在磁盘中，最后将磁盘中所有数据进行归并排序。
reduce：将数据进行合并。

## hive

1. 导入其他文件数据比如csv，必须先建一张临时表，将csv数据导入到临时表中，再创建一张其他格式表，插入。https://blog.csdn.net/u010711495/article/details/111722382

## 数据倾斜
